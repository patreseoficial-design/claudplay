<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ClaudPlay</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>

<header class="topo">
  <div class="logo">ClaudPlay</div>
  <div class="beta">BETA</div>
</header>

<main class="container">

  <!-- BANNER PRINCIPAL -->
  <a href="javascript:void(0)" class="banner" id="bannerPrincipal">
    <div class="banner-img">
      <img src="Banner/bannersupermarioworld.jpeg" id="bannerImg" />
    </div>
    <div class="banner-info">
      <h1 id="bannerTitle">Super Mario World</h1>
      <p id="bannerDesc">Jogue direto no navegador como se fosse um jogo em nuvem.</p>
    </div>
  </a>

  <!-- CARROSSEL -->
  <section class="carrossel">
    <div class="carrossel-title">
      <h2>Jogos</h2>
      <div class="carrossel-arrows">
        <button id="prev">⟵</button>
        <button id="next">⟶</button>
      </div>
    </div>

    <div class="carrossel-items" id="carrossel">

      <!-- SNES -->
      <a class="item"
         data-title="Super Mario World"
         data-desc="Clássico absoluto do Super Nintendo."
         data-img="Banner/bannersupermarioworld.jpeg"
         data-link="Emuladores/SuperNintendo/snes.html"
         data-anuncio="true">
        <img src="Banner/bannersupermarioworld.jpeg">
      </a>

      <a class="item"
         data-title="Super Mario World 2"
         data-desc="Yoshi’s Island."
         data-img="Banner/bannersupermarioworld2.jpeg"
         data-link="Emuladores/SuperNintendo/snes.html"
         data-anuncio="true">
        <img src="Banner/bannersupermarioworld2.jpeg">
      </a>

      <a class="item"
         data-title="Donkey Kong Country"
         data-desc="Um dos melhores jogos do SNES."
         data-img="Banner/bannerdonkeykong.jpeg"
         data-link="Emuladores/SuperNintendo/snes.html"
         data-anuncio="true">
        <img src="Banner/bannerdonkeykong.jpeg">
      </a>

      <a class="item"
         data-title="Super Mario Kart"
         data-desc="Corridas clássicas do SNES."
         data-img="Banner/bannersupermariokart.jpeg"
         data-link="Emuladores/SuperNintendo/snes.html"
         data-anuncio="true">
        <img src="Banner/bannersupermariokart.jpeg">
      </a>

      <a class="item"
         data-title="Super Mario All-Stars"
         data-desc="Todos os Marios clássicos."
         data-img="Banner/bannersupermarioall-star.jpeg"
         data-link="Emuladores/SuperNintendo/snes.html"
         data-anuncio="true">
        <img src="Banner/bannersupermarioall-star.jpeg">
      </a>

      <!-- NES -->
      <a class="item"
         data-title="Bomberman"
         data-desc="Clássico do NES."
         data-img="Banner/bannerbomberman.jpeg"
         data-link="Emuladores/Nes/nes.html"
         data-anuncio="false">
        <img src="Banner/bannerbomberman.jpeg">
      </a>

      <a class="item"
         data-title="Contra"
         data-desc="Ação intensa no NES."
         data-img="Banner/bannercontra.jpeg"
         data-link="Emuladores/Nes/nes.html"
         data-anuncio="false">
        <img src="Banner/bannercontra.jpeg">
      </a>

    </div>
  </section>
</main>

<footer class="rodape">
  <p>Versão Beta • ClaudPlay ©</p>
</footer>

<!-- AREA DO JOGO -->
<div id="jogoArea" style="display:none; position:fixed; inset:0; background:#000; z-index:999;">
  <button onclick="fecharJogo()" style="position:absolute; top:10px; right:10px; z-index:1000;">
    FECHAR
  </button>
  <iframe id="iframeJogo" style="width:100%; height:100%; border:none;"></iframe>
</div>

<!-- LOADING (CORRIGIDO) -->
<div id="loadingOverlay" style="display:none; position:fixed; inset:0; background:#000; z-index:1000; justify-content:center; align-items:center; color:#fff;">
  Carregando jogo...
</div>

<script>
const itens = document.querySelectorAll(".item");
const bannerImg = document.getElementById("bannerImg");
const bannerTitle = document.getElementById("bannerTitle");
const bannerDesc = document.getElementById("bannerDesc");
const bannerPrincipal = document.getElementById("bannerPrincipal");
let indexAtual = 0;

function mudarBanner(i){
  if (!itens[i]) return;

  bannerImg.src = itens[i].dataset.img;
  bannerTitle.innerText = itens[i].dataset.title;
  bannerDesc.innerText = itens[i].dataset.desc;
}

mudarBanner(0);

// setas
document.getElementById("prev").onclick = () => {
  indexAtual = (indexAtual - 1 + itens.length) % itens.length;
  mudarBanner(indexAtual);
};

document.getElementById("next").onclick = () => {
  indexAtual = (indexAtual + 1) % itens.length;
  mudarBanner(indexAtual);
};

// clique nos cards
itens.forEach((item, index) => {
  item.addEventListener("click", () => {
    indexAtual = index;
    mudarBanner(index);
    abrirJogo(item.dataset.link, item.dataset.anuncio === "true");
  });
});

// clique no banner principal
bannerPrincipal.addEventListener("click", () => {
  const item = itens[indexAtual];
  abrirJogo(item.dataset.link, item.dataset.anuncio === "true");
});

function abrirJogo(url, anuncio){
  const overlay = document.getElementById("loadingOverlay");
  const jogo = document.getElementById("jogoArea");
  const iframe = document.getElementById("iframeJogo");

  overlay.style.display = "flex";

  setTimeout(() => {
    jogo.style.display = "block";
    iframe.src = url;
    overlay.style.display = "none";
  }, anuncio ? 4000 : 800);
}

function fecharJogo(){
  document.getElementById("jogoArea").style.display = "none";
  document.getElementById("iframeJogo").src = "";
}
</script>

</body>
</html>