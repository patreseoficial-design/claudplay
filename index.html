<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ClaudPlay</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <header class="topo">
    <div class="logo">ClaudPlay</div>
    <div class="beta">BETA</div>
  </header>

  <main class="container">

    <!-- BANNER PRINCIPAL -->
    <a href="javascript:void(0)" class="banner" id="bannerPrincipal" data-link="Emuladores/SuperNintendo/snes.html" onclick="abrirJogo(bannerPrincipal.dataset.link, true)">
      <div class="banner-img">
        <img src="Banner/mario_banner.jpeg" alt="Super Mario World" id="bannerImg" />
      </div>
      <div class="banner-info">
        <h1 id="bannerTitle">Super Mario World</h1>
        <p id="bannerDesc">Jogue direto no navegador como se fosse um jogo em nuvem.</p>
      </div>
    </a>

    <!-- CARROSSEL -->
    <section class="carrossel">
      <div class="carrossel-title">
        <h2>Jogos</h2>
        <div class="carrossel-arrows">
          <button id="prev">‚üµ</button>
          <button id="next">‚ü∂</button>
        </div>
      </div>

      <div class="carrossel-items" id="carrossel">

        <a class="item" href="javascript:void(0)"
           data-title="Super Mario World"
           data-desc="Jogue direto no navegador como se fosse um jogo em nuvem."
           data-img="Banner/mario_banner.jpeg"
           data-link="Emuladores/SuperNintendo/snes.html"
           onclick="abrirJogo(this.dataset.link, true)">
          <img src="Banner/mario_banner.jpeg" alt="Super Mario World" />
        </a>

        <a class="item" href="javascript:void(0)"
           data-title="Sonic"
           data-desc="Jogue Sonic direto no navegador."
           data-img="Banner/sonic_banner.jpeg"
           data-link="Emuladores/MegaDrive/megadrive.html"
           onclick="abrirJogo(this.dataset.link, false)">
          <img src="Banner/sonic_banner.jpeg" alt="Sonic" />
        </a>

        <a class="item" href="javascript:void(0)"
           data-title="Super Mario Bros"
           data-desc="Cl√°ssico do NES jog√°vel online."
           data-img="Banner/bannersupermariobros.png"
           data-link="Emuladores/Nes/nes.html"
           onclick="abrirJogo(this.dataset.link, false)">
          <img src="Banner/bannersupermariobros.png" alt="Super Mario Bros" />
        </a>

      </div>
    </section>
  </main>

  <footer class="rodape">
    <p>Vers√£o Beta ‚Ä¢ ClaudPlay ¬©</p>
  </footer>

  <!-- AREA DO IFRAME (JOGO) -->
  <div id="jogoArea" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#000; z-index:999;">
    <button onclick="fecharJogo()" style="position:absolute; top:10px; right:10px; z-index:1000; padding:10px 15px; font-size:16px;">
      FECHAR
    </button>
    <iframe id="iframeJogo" style="width:100%; height:100%; border:none;"></iframe>
  </div>

  <!-- OVERLAY DE CARREGANDO -->
  <div id="loadingOverlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#000; z-index:1000; justify-content:center; align-items:center; flex-direction:column;">
    <div style="color:#fff; font-size:18px; margin-bottom:20px;">
      Carregando jogo...
    </div>

    <!-- AN√öNCIO FAKE -->
    <div style="width:300px; height:250px; background:#111; display:flex; justify-content:center; align-items:center; border:1px solid #444;">
      <span style="color:#fff;">AN√öNCIO</span>
    </div>
  </div>

  <script>
    const carrossel = document.getElementById("carrossel");
    const bannerImg = document.getElementById("bannerImg");
    const bannerTitle = document.getElementById("bannerTitle");
    const bannerDesc = document.getElementById("bannerDesc");
    const bannerPrincipal = document.getElementById("bannerPrincipal");

    const itens = document.querySelectorAll(".item");
    let indexAtual = 0;
    let autoplayInterval;

    function mudarBanner(i) {
      const item = itens[i];
      bannerImg.src = item.dataset.img;
      bannerTitle.innerText = item.dataset.title;
      bannerDesc.innerText = item.dataset.desc;

      // üöÄ IMPORTANTE: atualiza o link do banner
      bannerPrincipal.dataset.link = item.dataset.link;
    }

    itens.forEach((item, index) => {
      item.addEventListener("click", () => {
        indexAtual = index;
        mudarBanner(indexAtual);
      });
    });

    document.getElementById("prev").onclick = () => {
      carrossel.scrollBy({ left: -300, behavior: "smooth" });
      indexAtual = (indexAtual - 1 + itens.length) % itens.length;
      mudarBanner(indexAtual);
    };

    document.getElementById("next").onclick = () => {
      carrossel.scrollBy({ left: 300, behavior: "smooth" });
      indexAtual = (indexAtual + 1) % itens.length;
      mudarBanner(indexAtual);
    };

    // AUTOPLAY A CADA 40 SEGUNDOS
    function iniciarAutoplay(){
      autoplayInterval = setInterval(() => {
        carrossel.scrollBy({ left: 300, behavior: "smooth" });
        indexAtual = (indexAtual + 1) % itens.length;
        mudarBanner(indexAtual);
      }, 40000); // 40 segundos
    }

    function pararAutoplay(){
      clearInterval(autoplayInterval);
    }

    carrossel.addEventListener("mouseenter", pararAutoplay);
    carrossel.addEventListener("mouseleave", iniciarAutoplay);

    iniciarAutoplay(); // inicia o autoplay

    // FUN√á√ÉO PARA ABRIR O JOGO
    function abrirJogo(url, comAnuncio){
      // MOSTRA OVERLAY
      document.getElementById("loadingOverlay").style.display = "flex";

      // se for Mario, mant√©m por 5s antes de abrir
      if(comAnuncio){
        setTimeout(() => {
          abrirIframe(url);
        }, 5000);
      } else {
        abrirIframe(url);
      }
    }

    function abrirIframe(url){
      document.getElementById("jogoArea").style.display = "block";
      document.getElementById("iframeJogo").src = url;

      document.getElementById("iframeJogo").onload = function(){
        document.getElementById("loadingOverlay").style.display = "none";
      }
    }

    function fecharJogo(){
      document.getElementById("jogoArea").style.display = "none";
      document.getElementById("iframeJogo").src = "";
    }
  </script>
</body>
</html>
